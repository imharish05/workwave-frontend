import{l as g,d as n,e as a,f as c,g as l,y as d,s as m}from"./index-B6CIFsuu.js";const k=async(s,t)=>{try{s(g());const e=(await n.post("/auth/register",t)).data.token;if(!e)throw new Error("Token Missing");localStorage.setItem("token",e);const r=a(e);s(c({token:e,user:r.user}))}catch(o){const e=o.response?.data?.message||"Signup failed";s(l(e))}},f=async(s,t)=>{try{s(g());const e=(await n.post("/auth/login",t)).data.token;if(!e)throw new Error("Token missing");const r=a(e);s(c({token:e,user:r.user}))}catch(o){const e=o.response?.data?.message||"Login failed";s(l(e))}},p=async(s,t)=>{try{const o=n.post("/auth/role",{role:t});d.promise(o,{pending:"Setting role...",success:"Role set successfully",error:{render({data:u}){return u?.response?.data?.message||"Something went wrong"}}});const r=(await o).data.token;if(!r)throw new Error("Token missing");const i=a(r);s(c({user:i.user,token:r})),s(m(i.user.role))}catch(o){console.error(o)}};export{k as a,p as r,f as u};
